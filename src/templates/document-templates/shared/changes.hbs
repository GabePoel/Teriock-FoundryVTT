<section class="tab generic-changes active">
  <header>
    <div class="key">{{localize "EFFECT.ChangeKey"}}</div>
    <div class="mode">{{localize "EFFECT.ChangeMode"}}</div>
    <div class="value">{{localize "EFFECT.ChangeValue"}}</div>
    <div class="priority">{{localize "EFFECT.ChangePriority"}}</div>
    <div class="controls">
      <a
        data-action="addRootChange"
        {{#if (not @root.editable)}}disabled="true"{{/if}}
      >
        <i class="fa-regular fa-square-plus"></i>
      </a>
    </div>
  </header>
  <ol class="scrollable" data-changes>
    {{#each document.changes as |change i|}}
      {{#with ../fields.changes.element.fields as |changeFields|}}
        <li data-index="{{i}}">
          <div class="key">
            {{formInput
              changeFields.key
              name=(concat "changes." i ".key")
              value=change.key
              disabled=(not @root.editable)
            }}
          </div>
          <div class="mode">
            {{formInput
              changeFields.mode
              name=(concat "changes." i ".mode")
              value=change.mode
              choices=@root.modes
              disabled=(not @root.editable)
            }}
          </div>
          <div class="value">
            {{formInput
              changeFields.value
              name=(concat "changes." i ".value")
              value=change.value
              disabled=(not @root.editable)
            }}
          </div>
          <div class="priority">
            {{formInput
              changeFields.priority
              name=(concat "changes." i ".priority")
              value=change.priority
              placeholder=(lookup ../../priorities change.mode)
              disabled=(not @root.editable)
            }}
          </div>
          <div class="controls">
            <a
              data-action="deleteRootChange"
              data-index="{{i}}"
              {{#if (not @root.editable)}}disabled="true"{{/if}}
            >
              <i class="fa-solid fa-trash"></i>
            </a>
          </div>
        </li>
      {{/with}}
    {{/each}}
  </ol>
</section>
