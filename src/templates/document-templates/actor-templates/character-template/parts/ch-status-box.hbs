<div class="character-status-box">
  <div class="character-status-bars">
    <div class="character-status-bar-box">
      <div class="die-drawer top-drawer hack-drawer ch-hack-box hp-drawer">
        {{> 'systems/teriock/src/templates/document-templates/actor-templates/character-template/parts/ch-hack-box.hbs' }}
      </div>
      <div class="character-hit-bar-container character-bar-container">
        <div class="character-hit-bar character-bar toutline">
          <div
            class="character-bar-left"
            style="width: {{barLeft
              system.hp.value
              system.hp.max
              system.hp.temp
            }}%;"
          ></div>
          <div
            class="character-bar-temp"
            style="width: {{barTemp
              system.hp.value
              system.hp.max
              system.hp.temp
            }}%; {{barTempHide
              system.hp.value
              system.hp.max
              system.hp.temp
            }}"
          ></div>
          <div
            class="character-bar-lost"
            style="width: {{barLost
              system.hp.value
              system.hp.max
              system.hp.temp
            }}%;"
          ></div>
        </div>
        <div class="character-bar-overlay">
          <div class="character-bar-overlay-row character-hit-bar-overlay-row">
            {{numberInput
              system.hp.value
              name="system.hp.value"
              max=system.hp.max
              min=system.hp.min
              class="thover-soft character-bar-overlay-left character-bar-overlay-label"
              dataset=(object tooltip="Current HP")
            }}
            <div class="character-bar-overlay-max character-bar-overlay-label" data-tooltip="Maximum HP">
              <span>/ {{system.hp.max}} +</span>
            </div>
            {{formInput
              systemFields.hp.fields.temp
              value=system.hp.temp
              classes="thover-soft character-bar-overlay-temp character-bar-overlay-label"
              dataset=(object tooltip="Temporary HP")
            }}
          </div>
          <div
            class="take-harm-button thover take-damage-button"
            data-action="takeDamage"
            data-tooltip="Take Damage"
          >
            <i class="fa-fw fa-light fa-heart-crack"></i>
          </div>
        </div>
      </div>
      <div class="die-drawer hp-die-drawer hp-drawer">
        <div class="tgrid g7">
          {{{system.sheet.dieBox.hpDice}}}
        </div>
      </div>
    </div>
    <div class="character-status-bar-box">
      <div class="character-mana-bar-container character-bar-container">
        <div class="character-mana-bar character-bar toutline">
          <div
            class="character-bar-left"
            style="width: {{barLeft
              system.mp.value
              system.mp.max
              system.mp.temp
            }}%;"
          ></div>
          <div
            class="character-bar-temp"
            style="width: {{barTemp
              system.mp.value
              system.mp.max
              system.mp.temp
            }}%; {{barTempHide
              system.mp.value
              system.mp.max
              system.mp.temp
            }}"
          ></div>
          <div
            class="character-bar-lost"
            style="width: {{barLost
              system.mp.value
              system.mp.max
              system.mp.temp
            }}%;"
          ></div>
        </div>
        <div class="character-bar-overlay">
          <div class="character-bar-overlay-row character-mana-bar-overlay-row">
            {{numberInput
              system.mp.value
              name="system.mp.value"
              max=system.mp.max
              min=system.mp.min
              class="thover-soft character-bar-overlay-left character-bar-overlay-label"
              dataset=(object tooltip="Current MP")
            }}
            <div class="character-bar-overlay-max character-bar-overlay-label" data-tooltip="Maximum MP">
              <span>/ {{system.mp.max}} +</span>
            </div>
            {{formInput
              systemFields.mp.fields.temp
              value=system.mp.temp
              classes="thover-soft character-bar-overlay-temp character-bar-overlay-label"
              dataset=(object tooltip="Temporary MP")
            }}
          </div>
          <div
            class="take-harm-button thover take-damage-button"
            data-action="takeDrain"
            data-tooltip="Take Drain"
          >
            <i class="fa-fw fa-light fa-droplet-slash"></i>
          </div>
        </div>
      </div>
      <div class="die-drawer mp-die-drawer mp-drawer">
        <div class="tgrid g7">
          {{{system.sheet.dieBox.mpDice}}}
        </div>
      </div>
    </div>
    <!-- Wither Bar Start -->
    <div class="character-status-bar-box">
      <div class="character-wither-bar-container character-bar-container">
        <div class="character-wither-bar character-bar toutline">
          <div
            class="character-bar-left"
            style="width: {{barLeft system.wither.value system.wither.max 0}}%;"
          ></div>
          <div
            class="character-bar-temp"
            style="width: {{barTemp
              system.wither.value
              system.wither.max
              0
            }}%; {{barTempHide
              system.wither.value
            }}"
          ></div>
          <div
            class="character-bar-lost"
            style="width: {{barLost system.wither.value system.wither.max 0}}%;"
          ></div>
        </div>
        <div class="character-bar-overlay">
          <div
            class="character-bar-overlay-row character-wither-bar-overlay-row"
          >
            {{numberInput
              system.wither.value
              name="system.wither.value"
              max=system.wither.max
              min=system.wither.min
              class="thover-soft character-bar-overlay-left character-bar-overlay-label"
              dataset=(object tooltip="Current Wither")
            }}
            <div class="character-bar-overlay-max character-bar-overlay-label" data-tooltip="Maximum Wither">
              <span>/ {{system.wither.max}}</span>
            </div>
          </div>
          <div
            class="take-harm-button thover take-wither-button"
            data-action="takeWither"
            data-tooltip="Take Wither"
          >
            <i class="fa-fw fa-light fa-hourglass"></i>
          </div>
        </div>
      </div>
    </div>
    <!-- Wither Bar End -->
    <div class="character-presence-container character-bar-container toutline {{#if
      system.presence.overflow}}overflow{{/if}}">
      <div
        class="character-presence-bar"
        style="grid-template-columns:{{repeatStr system.presence.max ' 1fr'}};"
        data-tooltip="{{{system.presence.value}}} out of {{{system.presence.max}}} Presence Used"
      >
        {{#if (geq system.presence.value 1)}}
          <div
            class="presence-indicator used"
            style="grid-column: span {{{system.presence.value}}}; grid-template-columns:{{repeatStr
              system.presence.value
              ' 1fr'}}; display: grid;"
          >
            {{#repeat system.presence.value}}
              <div class="presence-indicator empty" style="background: transparent;"></div>
            {{/repeat}}
          </div>
        {{/if}}
        {{#repeat system.attributes.unp.value}}
          <div class="presence-indicator unused"></div>
        {{/repeat}}
      </div>
    </div>
  </div>
</div>
