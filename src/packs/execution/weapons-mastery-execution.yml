_id: 090fd08ae26477da
_key: '!macros!090fd08ae26477da'
_stats:
  coreVersion: '13'
  lastModifiedBy: teriockBuilder00
  systemId: teriock
  systemVersion: 0.9.17
author: teriockBuilder00
command: |-
  const data = /** @type {Teriock.HookData.UseAbility} */ scope.data;
  const ability = data.execution.source;
  if (ability.isOwner && ability.actor && !ability.inCompendium) {
    const equipmentClass = await tm.dialogs.selectWeaponClassDialog();
    const changes = [
      {
        key: "system.piercing.raw",
        mode: 4,
        priority: 10,
        qualifier: `@class.${equipmentClass}`,
        target: "equipment",
        time: "normal",
        value: "1",
      },
    ];
    await ability.update({
      "system.impacts.base.changes": changes,
    });
  }
img: icons/svg/dice-target.svg
name: Weapons Mastery - Execution
scope: global
type: script
