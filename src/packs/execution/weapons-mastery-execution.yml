name: Weapons Mastery - Execution
type: script
_id: BGmnfUMxPw2BZeCI
author: teriockBuilder00
img: icons/svg/dice-target.svg
scope: global
command: |-
  const data = /** @type {Teriock.HookData.UseAbility} */ scope.data;
  const ability = data.execution.source;
  if (ability.isOwner && ability.actor && !ability.inCompendium) {
    const equipmentClass = await tm.dialogs.selectWeaponClassDialog();
    const changes = [
      {
        key: "system.piercing.raw",
        mode: 4,
        priority: 10,
        qualifier: `@class.${equipmentClass}`,
        target: "equipment",
        time: "normal",
        value: "1",
      },
    ];
    await ability.update({
      "system.impacts.base.changes": changes,
    });
  }
_stats:
  coreVersion: '13'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
_key: '!macros!BGmnfUMxPw2BZeCI'
