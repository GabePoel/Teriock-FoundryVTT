_id: b20a3ed766f6438c
_key: '!macros!b20a3ed766f6438c'
_stats:
  coreVersion: '13'
  lastModifiedBy: teriockBuilder00
  systemId: teriock
  systemVersion: 0.9.17
author: teriockBuilder00
command: |-
  const data = /** @type {Teriock.HookData.UseAbility} */ scope.data;
  const buttons = data.execution.buttons;
  data.execution.buttons = buttons.filter(
    (button) => button.dataset.action === "apply-effect",
  );
  const validAbilities = actor.abilities
    .filter((a) => !a.isReference && a.system.standard)
    .sort((a, b) => a.name.localeCompare(b.name));
  const ability = await tm.dialogs.selectDocumentDialog(validAbilities, {
    hint: game.i18n.localize("TERIOCK.DIALOGS.Select.Ability.hint"),
    title: game.i18n.localize("TERIOCK.DIALOGS.Select.Ability.title"),
  });
  const button = data.execution.buttons.find(
    (b) => b.dataset.dataset === "apply-effect",
  );
  button.dataset.bonusSubs = JSON.stringify([ability.uuid]);
  data.execution.proficient = false;
  data.execution.fluent = false;
img: icons/svg/dice-target.svg
name: Skill Share - Pre-execution
scope: global
type: script
