name: Attune - Pre-execution
type: script
_id: BwnMZZRk69x3211Q
author: teriockBuilder00
img: icons/svg/dice-target.svg
scope: global
command: |-
  const data = /** @type {Teriock.HookData.UseAbility} */ scope.data;
  data.rollConfig.chatData.system.buttons = [];
  const actor = data.rollConfig.abilityData.actor;
  const equipment = actor.equipment
    .filter((e) => !e.system.isAttuned)
    .sort((a, b) => a.name.localeCompare(b.name));
  const selectedEquipment = await tm.dialogs.selectDocumentsDialog(
    equipment,
    {
      title: "Select Equipment",
      hint: "Select equipment to attune.",
      tooltip: true,
    },
  );
  await Promise.all(selectedEquipment.map((e) => e.system.attune()));
ownership:
  default: 0
flags: {}
_stats:
  coreVersion: '13'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
_key: '!macros!BwnMZZRk69x3211Q'
