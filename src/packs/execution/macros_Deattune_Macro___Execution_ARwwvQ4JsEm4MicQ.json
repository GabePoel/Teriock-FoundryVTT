{
  "name": "Deattune Macro - Execution",
  "type": "script",
  "_id": "ARwwvQ4JsEm4MicQ",
  "author": "qf5JYGZKzM588nE6",
  "img": "icons/svg/dice-target.svg",
  "scope": "global",
  "command": "const data = /** @type {Teriock.HookData.UseAbility} */ scope.data;\ndata.rollConfig.chatData.system.buttons = [];\nconst actor = data.rollConfig.abilityData.actor;\nconst equipment = actor.equipment\n  .filter((e) => e.system.isAttuned)\n  .sort((a, b) => a.name.localeCompare(b.name));\nconst selectedEquipment = await game.teriock.api.dialogs.selectDocumentsDialog(\n  equipment,\n  {\n    title: \"Select Equipment\",\n    hint: \"Select equipment to deattune.\",\n  },\n);\nawait Promise.all(selectedEquipment.map((e) => e.system.deattune()));",
  "folder": null,
  "sort": 500000,
  "ownership": {
    "default": 0,
    "qf5JYGZKzM588nE6": 3
  },
  "flags": {},
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "exportSource": null,
    "coreVersion": "13.345",
    "systemId": "teriock",
    "systemVersion": "0.1.0",
    "createdTime": 1753599764881,
    "modifiedTime": 1757058247252,
    "lastModifiedBy": "Z8sCTHO0edFF1hYo"
  },
  "_key": "!macros!ARwwvQ4JsEm4MicQ"
}
