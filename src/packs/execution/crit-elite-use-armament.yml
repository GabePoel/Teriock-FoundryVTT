_id: critEliteUseArma
_key: '!macros!critEliteUseArma'
_stats:
  coreVersion: '13'
  lastModifiedBy: teriockBuilder00
  systemId: teriock
  systemVersion: 0.9.16
author: teriockBuilder00
command: |-
  const data = /** @type {Teriock.HookData.UseArmament} */ scope.data;
  const critEliteIds = data.execution.actor?.effects
    .filter((c) => c.name === "Crit Elite Effect" && c.type === "consequence")
    .map((c) => c.id);
  if (critEliteIds && critEliteIds.length > 0) {
    await data.execution.actor?.deleteEmbeddedDocuments(
      "ActiveEffect",
      critEliteIds,
    );
  }
img: icons/svg/dice-target.svg
name: Crit Elite - Use Armament
scope: global
type: script
