name: Mechanics Refresh
type: script
_id: pBdEEyrki4bEguUU
author: teriockBuilder00
img: systems/teriock/src/icons/documents/mechanic.svg
scope: global
command: |-
  const essentialsPack = game.teriock.packs.essentials();

  let actorMechanics = essentialsPack.index.find(
    (m) => m.name === "Actor Mechanics",
  );
  actorMechanics = await foundry.utils.fromUuid(actorMechanics.uuid);

  const existingMechanics = actor.itemTypes?.mechanic || [];
  const existingMechanicIds = existingMechanics.map((m) => m.id);

  if (existingMechanics.length > 0) {
    await actor.deleteEmbeddedDocuments(
      "Item",
      existingMechanicIds
    );
  }

  await actor.createEmbeddedDocuments("Item", [actorMechanics]);
folder: JgA6RKyTPtfQ7yXf
ownership:
  default: 0
flags: {}
_stats:
  coreVersion: '13.345'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
_key: '!macros!pBdEEyrki4bEguUU'
