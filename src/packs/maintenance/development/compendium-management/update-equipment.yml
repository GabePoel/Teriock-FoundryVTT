name: Update Equipment
type: script
_id: NccvZMMNyFS0braS
author: teriockBuilder00
img: systems/teriock/src/icons/documents/equipment.svg
scope: global
command: |-
  const equipmentPack = game.teriock.packs.equipment();

  ui.notifications.info("Pulling all equipment from wiki.");

  async function processEquipment(equipmentName) {
    let equipmentItem = equipmentPack.index.find((e) => e.name === equipmentName);
    if (!equipmentItem) {
      equipmentItem = await game.teriock.Item.create({
        name: equipmentName,
        type: "equipment",
        system: {
          equipmentType: equipmentName,
        },
      }, { pack: "teriock.equipment" });
    } else {
      equipmentItem = await foundry.utils.fromUuid(equipmentItem.uuid);
    }
    await equipmentItem.system.wikiPull({ notify: false });
  }

  const equipmentPromises = Object.values(TERIOCK.index.equipment)
    .map((equipmentName) => processEquipment(equipmentName));

  await Promise.all(equipmentPromises);
  ui.notifications.success("Done.");
folder: EjZWrvZOxrEdrJfe
ownership:
  default: 0
flags: {}
_stats:
  coreVersion: '13'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
_key: '!macros!NccvZMMNyFS0braS'
