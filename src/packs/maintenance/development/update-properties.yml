name: Update Properties
type: script
_id: lM9iJK0o7R8cVvL9
author: teriockBuilder00
img: systems/teriock/src/icons/documents/property.svg
scope: global
command: |-
  await tm.utils.progressBar(
    Object.values(TERIOCK.index.properties),
    "Pulling Properties",
    async (name) => {
      let item = game.teriock.packs.properties.index.find((i) => i.name === name);
      if (!item) {
        item = await teriock.Item.create(
          { name, type: "wrapper" },
          { pack: "teriock.properties" },
        );
      } else {
        item = await fromUuid(item.uuid);
      }
      let effect = item.properties.find((a) => a.name === name);
      if (!effect) {
        const data = { name, type: "property" };
        effect = await item.createChildDocuments("ActiveEffect", [data]);
      }
      await effect.system.wikiPull({ notify: false });
      if (item.img !== effect.img) {
        await item.update({ img: effect.img });
      }
    },
    { batch: 50 },
  );
folder: L08qIbjJoCwEaiEi
flags: {}
_stats:
  coreVersion: '13'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
  compendiumSource: null
_key: '!macros!lM9iJK0o7R8cVvL9'
