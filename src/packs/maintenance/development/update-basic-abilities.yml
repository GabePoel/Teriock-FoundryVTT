name: Update Basic Abilities
type: script
_id: AEHBs2Fh23ulcqyb
author: teriockBuilder00
img: icons/svg/aura.svg
scope: global
command: >-
  const basicAbilitiesItem = await tm.fetch.getDocument(
    "Basic Abilities",
    "essentials",
  );


  const basicAbilityNames =
    await teriock.helpers.wiki.fetchCategoryAbilities("Basic abilities");

  const progress = ui.notifications.info(`Pulling basic abilities from wiki.`, {
    progress: true,
  });


  await tm.utils.ensureChildren(basicAbilitiesItem, "ability",
  basicAbilityNames);

  const toDelete = basicAbilitiesItem.abilities
    .filter((a) => !basicAbilityNames.includes(a.name))
    .map((a) => a.id);
  await basicAbilitiesItem.deleteEmbeddedDocuments("ActiveEffect", toDelete);

  await tm.utils.inferChildCompendiumSources(basicAbilitiesItem);

  await basicAbilitiesItem.system.refreshFromCompendiumSource();

  progress.update({ pct: 1 });
folder: L08qIbjJoCwEaiEi
flags: {}
_stats:
  coreVersion: '13'
  systemId: teriock
  systemVersion: 0.1.0
  lastModifiedBy: teriockBuilder00
  compendiumSource: null
_key: '!macros!AEHBs2Fh23ulcqyb'
