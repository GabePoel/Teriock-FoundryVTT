<div class="ab-consequences-tab" style="width: 100%;">
  <div class="ab-sheet-top" style="border-bottom: 1px solid var(--color-border);">
    {{> "systems/teriock/templates/common/header.hbs"}}
  </div>
  <div class="ab-consequences" style="padding: 1rem; width: 100%; height: 100%;">
    <div class="ab-consequences-config" style="display: flex; flex-direction: column; gap: 1rem;">
      <fieldset class="form-group" style="flex-direction: column;">
        <legend>Add or Remove Consequences</legend>
        {{formGroup
        systemFields.consequences.fields.base
        value=system.consequences.base
        choices=(lookup config.consequenceOptions.interaction system.interaction)
        testing="Is this working?"
        }}
        {{formGroup
        systemFields.consequences.fields.proficient
        value=system.consequences.proficient
        choices=(lookup config.consequenceOptions.interaction system.interaction)
        }}
        {{formGroup
        systemFields.consequences.fields.fluent
        value=system.consequences.fluent
        choices=(lookup config.consequenceOptions.interaction system.interaction)
        }}
      </fieldset>
      <fieldset class="form-group" style="flex-direction: column; width: 100%;">
        <legend>Base</legend>
        {{#each system.consequences.base as |consequence index|}}
        {{formInput
        ../systemFields.consequences.fields.base.element
        value=consequence
        label=(lookup (lookup ../config.consequenceOptions.interaction ../system.interaction) index)
        name=(concat "system.consequences.base." index)
        }}
        {{/each}}
      </fieldset>
      {{#if (exists system.consequences.proficient)}}
      <fieldset class="form-group" style="flex-direction: column; width: 100%;">
        <legend>If Proficient</legend>
        {{#each system.consequences.proficient as |consequence index|}}
        <fieldset class="form-group" style="flex-direction: column; width: 100%;">
          <legend>{{lookup (lookup ../config.consequenceOptions.interaction ../system.interaction) index}}</legend>
          {{formInput
          ../systemFields.consequences.fields.proficient.element
          value=consequence
          label=(lookup (lookup ../config.consequenceOptions.interaction ../system.interaction) index)
          name=(concat "system.consequences.proficient." index)
          }}
        </fieldset>
        {{/each}}
      </fieldset>
      {{/if}}
      {{#if (exists system.consequences.fluent)}}
      <fieldset class="form-group" style="flex-direction: column; width: 100%;">
        <legend>If Fluent</legend>
        {{#each system.consequences.fluent as |consequence index|}}
        <fieldset class="form-group" style="flex-direction: column; width: 100%;">
          <legend>{{lookup (lookup ../config.consequenceOptions.interaction ../system.interaction) index}}</legend>
          {{formInput
          ../systemFields.consequences.fields.fluent.element
          value=consequence
          label=(lookup (lookup ../config.consequenceOptions.interaction ../system.interaction) index)
          name=(concat "system.consequences.fluent." index)
          }}
        </fieldset>
        {{/each}}
      </fieldset>
      {{/if}}
    </div>
    <button
      class="ab-consequences-close"
      data-action="toggleConsequences"
      style="width: 100%; margin-top: 1.5rem;"
      data-tooltip="Close Consequences"
    >
      <i class="fa-solid fa-check"></i>
      Done
    </button>
  </div>
</div>
